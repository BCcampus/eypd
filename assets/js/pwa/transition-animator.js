class TransitionAnimator{static get TRANSITION_DURATION(){return'0.5s'}static get TRANSITION_F(){return'cubic-bezier(0.230, 1.000, 0.320, 1.000)'}constructor(){this._header=document.querySelector('header.hero'),this._footer=document.querySelector('footer.footer')}get isSingle(){return this._header.classList.contains('single')}get isFull(){return!this.isSingle}async toFull(){if(this.isFull)return()=>{};const a=this._header.querySelector('.ribbon'),b=this._header.querySelector('a'),c=this._header.getBoundingClientRect();this._header.classList.remove('single');const d=a.getBoundingClientRect();this._header.classList.add('single');const e=async function(){this._footer.style.transition=`transform ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F}`,this._footer.style.transform='translateY(100%)'}.bind(this)(),f=async function(){b.style.opacity=1,await requestAnimationFramePromise(),await requestAnimationFramePromise(),b.style.transition=`opacity ${TransitionAnimator.TRANSITION_DURATION} linear`,b.style.opacity=0,await transitionEndPromise(b),b.style.transition=''}.bind(this)();return await Promise.all([e,f]),async function(){this._header.classList.remove('single');const e=async function(){this._header.style.transform=`translateY(calc(-100% + ${c.height}px))`,await requestAnimationFramePromise(),await requestAnimationFramePromise(),this._header.style.transition=`transform ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F}`,this._header.style.transform='',await transitionEndPromise(this._header)}.bind(this)(),f=async function(){b.style.opacity='',a.style.transform=`translateX(-${d.right+32}px)`,await requestAnimationFramePromise(),await requestAnimationFramePromise(),a.style.transition=`transform ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F} 0.1s`,a.style.transform='',await transitionEndPromise(a)}.bind(this)(),g=async function(){this._footer.style.transform='translateY(0)',await transitionEndPromise(this._footer),this._footer.style.transition=this._footer.style.transform=''}.bind(this)();await Promise.all([e,f,g]),this._header.style.transition='',this._header.style.transform='',a.style.transition='',a.style.transform=''}.bind(this)}async toSingle(){if(this.isSingle)return()=>{};const a=document.scrollingElement.scrollTop,b=this._header.querySelector('.ribbon'),c=this._header.querySelector('a'),d=b.getBoundingClientRect();this._header.classList.add('single');const e=this._header.getBoundingClientRect();this._header.classList.remove('single'),document.scrollingElement.scrollTop=a;const f=0<d.bottom,g=0<e.bottom;if(async function(){this._footer.style.transition=`transform ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F}`,this._footer.style.transform='translateY(100%)'}.bind(this)(),f){const a=async function(){b.style.transition=`transform ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F}`,await requestAnimationFramePromise(),await requestAnimationFramePromise(),b.style.transform=`translateX(-${d.right+32}px)`,await transitionEndPromise(b)}.bind(this)(),c=async function(){this._header.style.transition=`transform ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F} 0.2s`,await requestAnimationFramePromise(),await requestAnimationFramePromise(),this._header.style.transform=`translateY(calc(-100% + ${e.height}px))`,await transitionEndPromise(this._header)}.bind(this)();await Promise.all([a,c])}return b.style.transform=`translateX(-400%)`,g||(this._header.style.transition='',this._header.style.transform=`translateY(-100%)`,await requestAnimationFramePromise(),await requestAnimationFramePromise()),async function(){(async function(){this._footer.style.transform='translateY(0)',await transitionEndPromise(this._footer),this._footer.style.transition=this._footer.style.transform=''}).bind(this)(),this._header.classList.add('single'),b.style.transform='',b.style.transition='',c.style.opacity=0,g||(document.scrollingElement.scrollTop=0,this._header.style.transition=`transform ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F} 0.2s`,this._header.style.transform=`translateY(0)`,await transitionEndPromise(this._header),this._header.style.transform=this._header.style.transition=''),await requestAnimationFramePromise(),await requestAnimationFramePromise(),c.style.transition=`opacity ${TransitionAnimator.TRANSITION_DURATION} linear`,c.style.opacity=1,await transitionEndPromise(c),c.style.transition='',c.style.opacity=''}.bind(this)}}function transitionEndPromise(a){return new Promise((b)=>{a.addEventListener('transitionend',function c(d){d.target!==a||(a.removeEventListener('transitionend',c),b())})})}function requestAnimationFramePromise(){return new Promise((a)=>requestAnimationFrame(a))}const instance=new TransitionAnimator;export{instance as default,TransitionAnimator};