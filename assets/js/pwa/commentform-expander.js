import{TransitionAnimator}from'./transition-animator.js';let btn,pending,respond,comments;async function updateBindings(){btn=document.querySelector('.commentformexpand'),pending=document.querySelector('#pendingcomments'),comments=document.querySelector('.comments'),respond=document.querySelector('#respond'),btn.addEventListener('click',onClick)}async function onClick(){const a=btn.getBoundingClientRect(),b=comments.getBoundingClientRect();respond.style.display='block',btn.style.display='none;';const c=comments.getBoundingClientRect();btn.style.display='block',respond.style.opacity='0';const d=b.top-c.top;pending.style.transform=comments.style.transform=`translateY(${d}px)`,btn.style.position='relative',await requestAnimationFramePromise(),await requestAnimationFramePromise(),pending.style.transition=comments.style.transition=`transform ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F}`,btn.style.transition=`opacity ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F}`,pending.style.transform=comments.style.transform=`translateY(${-a.height}px)`,btn.style.opacity='0',await transitionEndPromise(pending),btn.style.display='none',pending.style.transition=comments.style.transition=pending.style.transform=comments.style.transform='',respond.style.transition=`opacity ${TransitionAnimator.TRANSITION_DURATION} ${TransitionAnimator.TRANSITION_F}`,respond.style.opacity='1',await transitionEndPromise(respond)}function transitionEndPromise(a){return new Promise((b)=>{a.addEventListener('transitionend',function c(d){d.target!==a||(a.removeEventListener('transitionend',c),b())})})}function requestAnimationFramePromise(){return new Promise((a)=>requestAnimationFrame(a))}updateBindings().catch(()=>{}),_pubsubhub.subscribe('navigation',()=>updateBindings().catch(()=>{}));